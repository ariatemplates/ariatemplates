language: node_js
env:
  - COVERAGE=false
  - COVERAGE=true
matrix:
  fast_finish: true
  allow_failures:
   - env: COVERAGE=true
node_js:
  - 0.8
before_install:
  - npm config set ca ""
  - phantomjs --version
  - if [ "$COVERAGE" == "true" ] ; then cat test/attester.coverage.yml >> test/attester.yml ; fi
  - if [ "$COVERAGE" == "true" ] ; then npm install -g coveralls@2.8.0 &> install-coveralls.log & fi
  - echo "Content of test/attester.yml:" ; cat test/attester.yml
after_script:
  - if [ "$COVERAGE" == "true" ] ; then cat install-coveralls.log; fi
  - if [ "$COVERAGE" == "true" ] ; then cat test-results/coverage.lcov | coveralls && echo "Successfully sent coverage to https://coveralls.io" ; fi
notifications:
  email:
    - build@ariatemplates.com
